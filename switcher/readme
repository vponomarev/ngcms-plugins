# =========================================================================== #
# NG CMS // Плагины // Переключатель языков/шаблонов ( switcher )             #
# =========================================================================== #

Плагин switcher является сервисным плагином и позволяет создавать сайты,
поддерживающие реализовать следующие функции:
* использование разных языковых файлов, посетитель самостоятельно выбирает
  предпочтительный язык
* использование разных шаблонов сайта, как в рамках одного домена (посетитель
  самостоятельно из меню выбирает скин) так и с разделением по разным доменам
  (на разных доменных именах живёт один и тот же сайт, но с разными скинами)

Всё это реализуется благодаря понятию "профиль".
Каждый профиль содержит следующие переменные:
* Активен?      - признак активности профиля
* Шаблон        - выбирается шаблон, отображаемый при активации данного профиля
* Язык          -  выбирается языковой пакет используемый при активации данного 
                  профиля
* Наименование  - наименование профиля, отображаемое в списке выбора профиля
                  (при использовании списка выбора)
* Идентификатор - при заполнении этого поля и активации параметра "собственная
                  страница переадресации" появляется возможность сформировать
                  ссылку для перехода с внешнего сайта, по которой автоматически
                  активируется указанный пользователем профиль.
                  Если идентификатор не заполнен (или профиль не активен), то
                  "перейти" на этот профиль по внешней ссылку будет нельзя.
                  ! Поле должно состоять только из латинских символов и/или цифр !
                  Формат ссылки:
                  [     ЧПУ]: /plugin/switcher/?profile=<ID>
                  [ без ЧПУ]: ?action=plugin&plugin=switcher&profile=<ID>
                  Пример:
                   ID: en
                   Ссылка: /plugin/switcher/?profile=en

* "По умолчанию" для доменов - список доменов на которых данный профиль будет
                 работать по умолчанию. Параметр нужен при работе сайта
                 в режиме "мультидомен" - работа системы на разных доменах
                 при отображении на этих доменах одного и того же сайта.

Для сохранения информации об активном у посетителя профиля используется
механизм cookies.
Таким образом, если у посетителя отключены cookies, то плагин будет работать
только в случае, когда разные профили разнесены на разные доменны имена.

Плагин сохраняет в браузере посетителя переменную "sw_template" в которой
сохраняется ID активного у посетителя шаблона.


Интеграция меню выбора в дизайн сайта
---------------------------------------------------
В шаблоне main.tpl необходимо добавить переменную {switcher}.
На месте переменной будет отображаться меню выбора.

Меню выбора берётся из файла tpl/switcher.tpl
Вы его можете менять по собственному усмотрению, самое главное - 
сохранить имеющийся функционал работы с cookies.


Работа разных профилей на разных доменах
---------------------------------------------------
Если Вы не хотите посетителям давать возможность выбора
профиля, а хотите чтобы система сама автоматически на каждом домене
отображала свой профиль, то Вам достаточно сделать следующее:

1. В меню "Настройки" => "Настройки системы" => "Домены" => 
   "Список доменных имён сайта" указать список доменов, на которых вы 
   хотите работать. 
   Тем самым вы активируете функцию "мультидоменность".
2. Настроить систему для работы с мультидоменностью, как это сделать - увидите
   выполнив п. 1
3. В профилях плагина switcher в поле "'По умолчанию' для доменов" прописать
   доменные имена на которых данный профиль должен активироваться.


Всё, на этом все настройки закончены и Вы можете наслаждаться работой!
