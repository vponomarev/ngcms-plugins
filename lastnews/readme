# =========================================================================== #
# NG CMS // Плагины // Последние новости                                      #
# =========================================================================== #

Плагин позволяет отобразить информационный блок с последними новостями,
опубликованными на сайте.

При активации плагина становится доступна переменная {plugin_lastnews}.
Оформление (шаблон) плагин может брать как из собственного подкаталога tpl/
так и из шаблона сайта из каталога (внутри шаблона) plugins/lastnews/

Для работы используются следующие файлы-шаблоны:
* lastnews.tpl - общее оформление последних новостей и заголовки
  Доступные переменные:
  {tpl_url} - URL к шаблонам
  {entries} - строки новостей

* entries.tpl - оформление строки новостей
  Доступные переменные:
  {link}	- ссылка на новость
  {views}	- кол-во просмотров новости
  {date}	- дата публикации новости
  {title}	- название новости
  {author}	- ник автора со ссылкой на его профиль
  {author_link}	- ссылка на профиль автора новости
  {author_name}	- ник автора
  {category}	- список категорий новости
  {news-id}	- ID новости
  Доступные блоки:
  [edit-news]..[/edit-news] - содержимое блока выводится (и подсвечивается ссылкой) при
		наличии прав на редактирование новости



# ============================================================================== #
# Плагин поддерживает режим интеграции с другими новостным плагинами.            #
# При активации данного режима в отображении шаблона entries.tpl вы можете       #
# использовать переменные любых плагинов, "работающих" с конкретными новостями   #
# ============================================================================== #

================================================================================
Кроме автоматического режима, плагин также поддерживает и ручной режим работы.
Это означает, что Вы по собственному желанию можете выводить сколько угодно блоков
последних новостей, причём каждый блок может иметь свои настройки, внешний вид и т.д.

За вывод всех информационных блоков в файле lastnews.php отвечает следующая функция:
> function plugin_lastnews();

При этом фактической подготовкой занимается функция ( plugin_lastnews() просто вызывает
её):
> function plugin_lastnewsGenerator($orderby = '', $categories = array(), $overrideParams = array());

Данная функция принимает следующие параметры:
$orderby - порядок сортировки новостей в БД (напрямую передаётся в SQL запросе). 
    Используйте с осторожностью, т.е. неправильное указание вызовет ошибку исполнения.
$categories - массив со списком ID категорий, из которых выводить новости. Если не заполнен,
    то выводится информация по всем категориям.
    Правила заполнения:
    * каждый элемент может содержать как цифру так и массив.
    * отображаются новости, которые находятся в любом из указанных в массиве элементов
    * если элемент является массивом, то он должен содержать список категорий в которых
      новость должна быть одновременно.

    Пример:
     array (1, 3, array(7,8), array(15,23,33), 48) означает:
     Выводить все новости, которые находятся в:
      . категории 1 ИЛИ
      . категории 3 ИЛИ
      . одновременно в категориях 7 и 8 ИЛИ
      . одновременно в категориях 15, 23 и 33 ИЛИ
      . категории 48

$overrideParams - конфигурационный ассоциативный массив со следующими параметрами:
 * number	- кол-во новостей для отображения
 * offset	- номер (по порядку) с которого начинать показ
 * dateformat	- формат даты, описание см. в конфигураторе
 * maxlength	- обрезание макс. длины названия новости
 * overrideTemplatePath - путь, в котором хранятся шаблоны lastnews.tpl/entries.tpl для данного
   блока.
   При задании этой переменной вы можете использовать встроенную константы:
   > tpl_site - указывает путь к текущему шаблону сайта (с '/' в конце)
   		пример: tpl_site . 'plugins/lastnews/skin1'
   > root     - указывает путь к каталогу /engine (без '/' в конце)
		пример: root . '/plugins/lastnews/tpl/skins/skin1'

 Все параметры конфигурационного массива не являются обязательными и имеют свои значения
 по умолчанию.


