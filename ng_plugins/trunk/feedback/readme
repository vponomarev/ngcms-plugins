# =========================================================================== #
# NG CMS // Плагины // Генератор форм обратной связи                          #
# =========================================================================== #

 Плагин feedback позволяет администратору создавать различные типы форм
обратной связи, которые будет заполнять посетитель.

Плагином поддерживается неограниченное кол-во форм, внутри формы может быть
любое кол-во полей.
Поле может быть следующего типа:
1. Текстовое - одна строка, которую вводит пользователь
2. Текстовый блок - многострочный блок (textarea)
3. Поле выбора - выпадающий список, варианты со значениями прописываются
   администратором при создании/настройке формы обратной связи

Результаты заполнения форм отправляются на заранее заданный список e-mail
адресов (список задаётся для каждой формы отдельно)

Настройка плагина
=====================

[x] Создание формы.
------------------------
При нажатии на ссылку "создать новую форму" создаётся пустая форма с 
id "newform". При использовании настоятельно рекомендуется заменить
идентификатор формы на другое.

[x] Использование формы.
------------------------
Для того, чтобы форму можно было использовать, необходимо выставить 
флаг "активна" при её редактировании.


[x] Собственные шаблоны.
------------------------
При желании, вы можете создать свой собственный шаблон для любой
формы обратной связи.
Шаблоны хранятся в каталоге
engine/plugins/feedback/tpl/templates/

При указании собственного шаблона плагин вместо генерации оформления из
шаблона по умолчанию, просто выводит выбранный вами шаблон.




[x] -- Собственные шаблоны для отправки EMail сообщений пользователю
[x] Расположены в engine/plugins/feedback/tpl/tmail/, должны содержать файлы с именем
    NAME.html.tpl и NAME.text.tpl для HTML и текстового представления email письма
------------------------
В собственных шаблонах доступны следующие TWIG переменные:
  * form		- массив с параметрами формы
  * form.id		- ID формы
  * form.title		- название формы
  * form.description	- описание формы
  * flags		- массив с наборами флагов
  * flags.link_news	- признак наличие прикрепленной новости

Для отображения полей формы доступны следующие переменные:
  * entries		- массив, содержит данные о переменных, отсортирован в соответствии с порядком
			  отображения переменных в настройках формы
  * entries[x].id	- ID переменной
  * entries[x].title	- заголовок переменной
  * entries[x].value	- заполненное пользователем значение переменной

  * values		- массив со значениями переменных
			ключ - ID переменной
			значение - заполненное пользователем значение переменной

В случае наличия прикрепленной новости доступны также переменные:
  * news.id		- ID прикрепленной новости
  * news.title		- заголовок новости
  * news.url		- URL прикрепленной новости


[x] Привязка формы к новостям
------------------------
Форма может работать в 3х режимах:
- Без привязки
- Привязка возможна
- Привязка обязательна

Для привязки формы к новости необходимо к URL'у новости дополнительно передавать GET параметр linked_id={тут_id_новости}
При размещении ссылки в шаблонах новостей (news.short.tpl / news.full.tpl) доп. параметр будет выглядеть как
linked_id={news-id}

Полностью URL формы в установке по умолчанию будет выглядеть как: /plugin/feedback/?id=9&linked_id={news-id}



Использование плагина
=====================
При заходе в режим редактирования формы обратной связи вы увидите URL, по которому данная форма будет доступна.



