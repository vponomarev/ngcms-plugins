# =========================================================================== #
# NG CMS // Плагины // Архив сайта                                            #
# =========================================================================== #

Плагин позволяет на сайте отображать информационный блок-архив новостей.
В блоке показывается список месяцев в которые на сайте создавались новости.

Для работы плагина используется единый TWIG шаблон (по умолчанию archive.tpl).
--------------------------------------------------------------------
Поддерживаемые переменные:
  . {{tpl_url}} - путь к текущему активному шаблону сайта

* Цикл {% for entry in entries %}{% endfor %} - шаблон содержимого (строки) информационного блока
  Поддерживаемые переменные:
  . {{entry.link}}   - ссылка на новости по указанному месяцу
  . {{entry.title}}   - название месяца и год
  . {{entry.cnt}}     - кол-во новостей в указанном месяце [включается в настройках]
  . {{entry.ctext}}   - текстовое описание кол-ва, конкретное слово указано в языковом
                файле main.ini (переменная counter.case) [включается в настройках]
  . {% if (entry.counter) %} .. {% endif %} - информационный блок, всё что в нём лежит либо
    (не)показывается в зависимости от установки флага "отображать счетчик новостей"
    в настройках плагина


================================================================================
Варианты использования плагина в шаблонах
================================================================================
1. Автоматический запуск.
В шаблоне main.tpl будет доступна переменная {plugin_archive} с выводом блока календаря
2. TWIG
В любом шаблоне можно запустить генерацию календаря при помощи  TWIG функции callPlugin()

Пример (для TWIG шаблона):
{{ callPlugin('archive.show', {'maxnum' : 12, 'counter' : 1, 'tcounter' : 1, 'template': 'archive_twig'}) }}

Пример (для любого не-TWIG шаблона, к примеру, для main.tpl):
[TWIG]{{ callPlugin('archive.show', {'cacheExpire': 60 }) }}[/TWIG]

Доступные переменные (передаются в качестве мессива параметров после имени 'archive.show':
* maxnum		- кол-во отображаемых месяцев
* counter		- отображать счетчик новостей
* tcounter	- отображать текстовое описание количества
* template	- имя шаблона
* cacheExpire		- срок жизни кеша (по умолчанию = 0)

__________________________________________
  Поддерживаемые функции                 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ Генерацию блока при помощи TWIG функции callPlugin()
+ Кеширование
+ Шаблоны плагина внутри шаблона сайта