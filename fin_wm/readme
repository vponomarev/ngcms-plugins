# ======================================================================== #
# Наименование модуля: fin_wm                                              #
# ======================================================================== #

Данный модуль является так называемым "Finance acceptor'ом" 
к модулю finance, он позволяет принимать средства на внутренний
счёт пользователя через систему WebMoney.

#=!======================================================================!=#
# ! ВНИМАНИЕ                                                             ! #
#=!======================================================================!=#
 Внутри финансовой системы (плагин finance) может существовать только одна 
валюта (на выбор пользователя: RUR, USD, EUR).
 При этом плагин fin_wm позволяет одновременно принимать платежи с 3х
типов кошельков: WMR, WMZ, WME и конвертировать валюту платежа во внутреннюю
валюту системы.
 При настройке плагина fin_wm вы должны самостоятельно задавать типы кошельков
с которых вы хотите принимать средства, а также коэффициент пересчёта во
внутреннюю валюту.



Для работы модуля Вам необходимо:
1. Быть зарегистрированным в системе WebMoney
2. Иметь персональный (или выше) сертификат системы WebMoney
3. Ваш сайт должен быть 24 часа в сутки 7 дней в неделю доступен  [ !!! ]
   из интернета, чтобы в любой момент система WebMoney могла      [ !!! ]
   проинформировать Вас о поступлении новых средств.              [ !!! ]


Допустим, у вас уже есть всё из вышеперечисленного.
Тогда для использования этого модуля Вам необходимо:
1. Установить и активировать модуль finance
2. Установить данный ( fin_wm ) модуль
3. Зайти в систему WebMoney Merchant ( https://merchant.webmoney.ru/ )
   и авторизоваться при помощи вашего webmoney клиента
4. Зайти в раздел "Настройка" -> "Web Merchant Interface" и выбрать там
   кошелёк (нажав "настройка") на который вы собираетесь принимать средства.
5. Придумайте и введите секретный код в поле "Secret key". Этот же код вам 
     также будет необходимо внести в поле "Сектерный код сервиса Web Merchant 
     Interface" в настройках данного плагина.
6. Заполнить следующим образом остальные параметры и нажмите "сохранить":
   Передавать параметры в предварительном запросе: Да
   Result URL: <см. конфигуратор плагина>
   Success URL: <см. конфигуратор плагина>
   Fail URL: <см. конфигуратор плагина>
   метод вызова Success URL: LINK
   метод вызова Fail URL: LINK
   Метод формирования контрольной подписи: MD5
   Тестовый/Рабочий режимы: Рабочий
   Активность: Вкл.
   Прием чеков Paymer.com (ВМ-карт): Выкл
   Прием платежей с телефонов Telepat.ru: Выкл
   Прием платежей с терминалов Элекснет: Выкл
7. Войдите в настройку плагина fin_wm и заполните параметры следующим образом:
   Номер баланса на который начисляются бонусы: Основной баланс
   Сектерный код сервиса Web Merchant Interface: <укажите секретный код 
     введенный в п. 5>
   Режим работы: выберите "реальный" или "тестовый" на ваше усмотрение. 
     В тестовом режиме с кошелька webmoney средства списываться не будут, 
     но будут начисляться на внутренний счёт пользователя.
   Режим формирования подписи: MD5 (другие режимы пока не реализованы)
   По выбранному кошельку вы должны выбрать соответствующий ему тип валюты и
   заполнить параметры:
    * Разрешить приём средств на кошелёк: Да
    * Номер кошелька: укажите кошелёк, который вы настраивали на предыдущих шагах.
      К примеру, R985287444393
    * Коэффициент пересчета в валюту сайта: укажите коэффициент. Если валюта сайта и 
      валюта кошелька совпадают, то необходимо указать "1"
8. Повторить пункты 4-7 для всех кошельков на которые вы хотите принимать средства
   (по одному кошельку каждого типа), следует учесть, что "Secret key" на всех
   кошельках _ДОЛЖЕН_БЫТЬ_ОДИНАКОВЫМ_.

9. Включите плагин fin_wm

После окончания настройки вы сможете пополнить счёт при помощи WebMoney на странице
плагина finance.
